"use strict";function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){r=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(r)throw a}}}}function t(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var a=document.querySelectorAll(".modal-close"),e=document.querySelector(".mobile-menu"),n=document.querySelector(".js-header-menu"),c=document.querySelector(".modal-sign-in"),r=document.querySelectorAll(".button-js-signIn"),l=document.querySelector(".js-login-form"),s=(document.querySelector(".js-login-submit"),document.querySelector(".modal-sign-in .modal-popup")),u=document.querySelector(".modal-register"),d=document.querySelectorAll(".button-js-register"),m=document.querySelector(".js-register"),f=(document.querySelector(".js-register-submit"),document.querySelector(".modal-register .modal-popup")),v=document.querySelectorAll(".js-profile-link"),p=document.querySelector(".modal-send-message"),h=document.querySelector(".button-js-send-message"),g=document.querySelector(".js-send-message"),y=(document.querySelector(".js-send-message-submit"),document.querySelector(".modal-send-message .modal-popup"));function b(e,t,n){e.addEventListener("click",function(){t.classList.toggle("modal-open")}),a[n].addEventListener("click",function(){t.classList.remove("modal-open")})}function S(){localStorage.getItem("token")?(r.forEach(function(e){e.classList.add("hidden")}),d.forEach(function(e){e.classList.add("hidden")}),v.forEach(function(e){e.classList.remove("hidden")})):(r.forEach(function(e){e.classList.remove("hidden")}),d.forEach(function(e){e.classList.remove("hidden")}),v.forEach(function(e){e.classList.add("hidden")}))}function L(e,t){t.querySelectorAll(".custom-input_bad").forEach(function(e){e.classList.remove("custom-input_bad")}),e.forEach(function(e){e.remove()})}function w(e){var t=0,n=e.querySelectorAll(".required");if(n){for(var o=0;o<n.length;o++){var a=n[o];""===a.value&&(a.classList.add("custom-input_bad"),a.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">This field is required</p>'),t++)}return t}return t}function q(e){var t=0,e=e.querySelectorAll(".email");return e&&e.forEach(function(e){""!==e.value&&!1===/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase())&&(e.classList.add("custom-input_bad"),e.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">Please enter a valid email address (your entry is not in the format "somebody@example.com")</p>'),t++)}),t}b(n,e,0),r.forEach(function(e){b(e,c,1)}),d.forEach(function(e){b(e,u,2)}),b(h,p,3),S();var E,k=document.forms.filter,A={},h=M();function j(e){e.tags=t(k.elements.color).filter(function(e){return e.checked}).map(function(e){return e.value}),e.views=(t(k.elements.views).find(function(e){return e.checked})||{value:null}).value,e.comments=t(k.elements.comments).filter(function(e){return e.checked}).map(function(e){return e.value}),e.limit=(t(k.elements.limit).find(function(e){return e.checked})||{value:null}).value,e.sort=(t(k.elements.sort).find(function(e){return e.checked})||{value:null}).value}function x(e){var t=new URLSearchParams;e.tags.forEach(function(e){t.append("tags",e)}),e.views&&t.set("views",e.views),e.comments.forEach(function(e){t.append("commentsCount",e)}),e.limit&&t.set("limit",e.limit),e.sort&&t.set("sort",e.sort),history.replaceState(null,document.title,"?"+t.toString())}function M(){var e=new URLSearchParams(location.search);return{tags:e.getAll("tags"),views:e.get("views"),comments:e.getAll("commentsCount"),limit:e.get("limit"),sort:e.get("sort")}}E=h,k.elements.color.forEach(function(e){e.checked=E.tags.includes(e.value)}),k.elements.views.forEach(function(e){e.checked=E.views===e.value}),k.elements.comments.forEach(function(e){e.checked=E.comments.includes(e.value)}),k.elements.limit.forEach(function(e){e.checked=E.limit===e.value}),k.elements.sort.forEach(function(e){e.checked=E.sort===e.value}),k.addEventListener("reset",function(e){history.replaceState(null,document.title,window.location.pathname)});var T=document.querySelector(".blog-posts"),I="https://academy.directlinedev.com/api/posts",P=document.querySelector(".blog-posts-pagination__page"),C="https://academy.directlinedev.com/api/users";function O(e){var t=e.method,n=e.url,o=e.onload,e=new XMLHttpRequest;e.open(t,n),e.send(),e.onload=o}function H(e,t,n){n={method:t,headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(2<arguments.length&&void 0!==n?n:null)};return fetch(e,n)}function U(){var e=document.querySelectorAll(".blog-card");null!==e&&e.forEach(function(e){return e.remove()})}function D(e){document.querySelector(".blog-posts-pagination__link_active").classList.remove("blog-posts-pagination__link_active"),e.classList.add("blog-posts-pagination__link_active")}function F(e,t,n){return e.slice(t*n-5,t*n)}O({method:"GET",url:I+"?limit=999",onload:function(e){var c,t,n;200===e.target.status&&(J((c=JSON.parse(e.target.response)).data.length,5),t=c.data,n=5,e=t.filter(function(e){return e.id<=n}),document.querySelectorAll(".blog-posts-pagination__link").forEach(function(o){var a=+o.textContent;o.addEventListener("click",function(e){var t,n;D(o),U(),R((t=c.data,n=5,t.slice(n*a-5,n*a)))})}),Y[0].addEventListener("click",function(e){G(document.querySelector(".blog-posts-pagination__link_active").previousElementSibling,c.data,5)}),Y[1].addEventListener("click",function(e){G(document.querySelector(".blog-posts-pagination__link_active").nextElementSibling,c.data,5)}),R(e))}});var Y=document.querySelectorAll(".slider-button");function G(e,t,n){e&&(D(e),U(),R(F(t,n,+e.textContent)))}function J(e,t){for(var n=1<arguments.length&&void 0!==t?t:5,o=0;o<e/n;o++){var a=N("button","blog-posts-pagination__link");P.append(a),0===o&&a.classList.add("blog-posts-pagination__link_active"),a.innerText=o+1}}function N(e,t){e=document.createElement(e);return e.classList.add(t),e}function R(e){var t,n,o,a,c,r,i,l,s,u,d,m,f=_(e);try{for(f.s();!(t=f.n()).done;){var v=t.value,p=new Date(v.date),h={};h.date=p.getDate().toString(),h.month=p.getMonth().toString(),h.year=p.getFullYear(),h.date.length<2&&(h.date="0"+h.month),h.month.length<2&&(h.month="0"+h.month);var g="".concat(h.date,".").concat(h.month,".").concat(h.year);T.insertAdjacentHTML("beforeend",(n=v.desktopPhotoUrl,o=v.mobilePhotoUrl,a=v.mobile2xPhotoUrl,c=v.tabletPhotoUrl,r=v.tablet2xPhotoUrl,i=g,l=v.views,s=v.commentsCount,u=v.title,d=v.text,void 0,'\n    <div class="blog-card">\n        <picture class="blog-card__picture">\n            <source srcset="'.concat((m="https://academy.directlinedev.com")+o,", ").concat(m+a,' 2x" media="(max-width:400px)">\n            <source srcset="').concat(m+c,", ").concat(m+r,' 2x" media="(max-width:840px)">\n            <source srcset="').concat(m+n,'">\n            <img class="blog-card__picture-item" src="').concat(m+n,'" alt="">\n        </picture>\n        <div class="blog-card__wrapper">\n            <div class="blog-card__tags">\n\n            </div>\n            <div class="blog-card__description">\n                <div>').concat(i,"</div>\n                <div>").concat(l," views</div>\n                <div>").concat(s,' comments</div>\n            </div>\n            <h3 class="blog-card__title">').concat(u,'</h3>\n            <p class="blog-card__text">').concat(d,'</p>\n            <a class="blog-card__link" href="#">Go to this post</a>\n        </div>\n    </div>\n    ')));var y,b=T.querySelectorAll(".blog-card__tags"),S=_(v.tags);try{for(S.s();!(y=S.n()).done;)!function(){var e=y.value,t=N("div","blog-card-tag");t.style.background=e.tag.color,b.forEach(function(e){e.append(t)})}()}catch(e){S.e(e)}finally{S.f()}}}catch(e){f.e(e)}finally{f.f()}}k.addEventListener("submit",function(e){e.preventDefault(),j(A),x(A);var n=M();U(),document.querySelectorAll(".blog-posts-pagination__link").forEach(function(e){return e.remove()}),function(e,t,n){return n=2<arguments.length&&void 0!==n?n:null,n={method:t,headers:{"Content-Type":"application/json;charset=utf-8","x-access-token":localStorage.getItem("token")},body:n},fetch(e,n)}(I+"".concat(location.search),"GET").then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;var o=e.data,a=null!==n.limit?n.limit:5;J(o.length,a);var t,e=(t=a,o.filter(function(e){return e.id<=t}));document.querySelectorAll(".blog-posts-pagination__link").forEach(function(t){var n=+t.textContent;t.addEventListener("click",function(e){D(t),U(),R(F(o,a,n))})}),Y[0].addEventListener("click",function(e){G(document.querySelector(".blog-posts-pagination__link_active").previousElementSibling,o.data,a)}),Y[1].addEventListener("click",function(e){G(document.querySelector(".blog-posts-pagination__link_active").nextElementSibling,o.data,a)}),R(e)}).catch(function(e){console.error(e)})}),l.addEventListener("submit",function(e){var t;e.preventDefault(),(t={}).email=l.emailLog.value,t.password=l.passwordLog.value,e=t,L(l.querySelectorAll(".input-caption_bad"),l),0===w(t=l)+q(t)&&H(C+"/login","POST",e).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;l.classList.add("closed"),s.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),c.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(s.style.height="100vh");var t=c.querySelector(".modal-caption");c.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),l.classList.remove("closed"))}),localStorage.setItem("token",e.data.token),localStorage.setItem("id",e.data.userId),S()}).catch(function(e){console.error(e)})}),m.addEventListener("submit",function(e){e.preventDefault();var t,n=((t={}).email=m.email.value,t.location=m.location.value,t.surname=m.surname.value,t.name=m.name.value,t.password=m.password.value,t.age=m.age.value,t);L(m.querySelectorAll(".input-caption_bad"),m),0===w(e=m)+q(e)+(t=0,""!==(e=(e=e).querySelector(".age")).value&&e.value<20&&(e.classList.add("custom-input_bad"),e.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">Your age is under 20</p>'),t++),t)&&H(C,"POST",n).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;m.classList.add("closed"),f.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),u.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(f.style.height="100vh");var t=u.querySelector(".modal-caption");u.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),m.classList.remove("closed"))})})}),g.addEventListener("submit",function(e){e.preventDefault();var t={to:(e=((t={}).name=g.nameMessage.value,t.subject=g.subjectMessage.value,t.email=g.emailMessage.value,t.phone=g.phoneMessage.value,t.text=g.textMessage.value,t)).email,body:JSON.stringify(e)};L(g.querySelectorAll(".input-caption_bad"),g),0===w(e=g)+q(e)&&H("https://academy.directlinedev.com/api/emails","POST",t).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;g.classList.add("closed"),y.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),p.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(y.style.height="100vh");var t=p.querySelector(".modal-caption");p.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),g.classList.remove("closed"))})})}),window.addEventListener("scroll",function(){var e=document.querySelector(".btn-scroll-up");1200<=window.pageYOffset?(e.classList.add("scroll-show"),e.classList.contains("scroll-show")&&e.addEventListener("click",function(){window.scrollBy({top:-window.pageYOffset,behavior:"smooth"})})):e.classList.remove("scroll-show")});