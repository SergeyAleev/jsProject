"use strict";var n=document.querySelectorAll(".modal-close"),e=document.querySelector(".mobile-menu"),t=document.querySelector(".js-header-menu"),o=document.querySelector(".modal-sign-in"),a=document.querySelectorAll(".button-js-signIn"),s=document.querySelector(".js-login-form"),c=(document.querySelector(".js-login-submit"),document.querySelector(".modal-sign-in .modal-popup")),l=document.querySelector(".modal-register"),r=document.querySelectorAll(".button-js-register"),i=document.querySelector(".js-register"),d=(document.querySelector(".js-register-submit"),document.querySelector(".modal-register .modal-popup")),u=document.querySelectorAll(".js-profile-link"),m=document.querySelector(".modal-send-message"),p=document.querySelector(".button-js-send-message"),f=document.querySelector(".js-send-message"),v=(document.querySelector(".js-send-message-submit"),document.querySelector(".modal-send-message .modal-popup"));function h(e,t,o){e.addEventListener("click",function(){t.classList.toggle("modal-open")}),n[o].addEventListener("click",function(){t.classList.remove("modal-open")})}function y(){localStorage.getItem("token")?(a.forEach(function(e){e.classList.add("hidden")}),r.forEach(function(e){e.classList.add("hidden")}),u.forEach(function(e){e.classList.remove("hidden")})):(a.forEach(function(e){e.classList.remove("hidden")}),r.forEach(function(e){e.classList.remove("hidden")}),u.forEach(function(e){e.classList.add("hidden")}))}function S(e,t){t.querySelectorAll(".custom-input_bad").forEach(function(e){e.classList.remove("custom-input_bad")}),e.forEach(function(e){e.remove()})}function g(e){var t=0,o=e.querySelectorAll(".required");if(o){for(var n=0;n<o.length;n++){var a=o[n];""===a.value&&(a.classList.add("custom-input_bad"),a.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">This field is required</p>'),t++)}return t}return t}function L(e){var t=0,e=e.querySelectorAll(".email");return e&&e.forEach(function(e){""!==e.value&&!1===/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase())&&(e.classList.add("custom-input_bad"),e.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">Please enter a valid email address (your entry is not in the format "somebody@example.com")</p>'),t++)}),t}h(t,e,0),a.forEach(function(e){h(e,o,1)}),r.forEach(function(e){h(e,l,2)}),h(p,m,3),y();var q="https://academy.directlinedev.com/api/users";function b(e,t,o){o={method:t,headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(2<arguments.length&&void 0!==o?o:null)};return fetch(e,o)}s.addEventListener("submit",function(e){var t;e.preventDefault(),(t={}).email=s.emailLog.value,t.password=s.passwordLog.value,e=t,S(s.querySelectorAll(".input-caption_bad"),s),0===g(t=s)+L(t)&&b(q+"/login","POST",e).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;s.classList.add("closed"),c.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),o.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(c.style.height="100vh");var t=o.querySelector(".modal-caption");o.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),s.classList.remove("closed"))}),localStorage.setItem("token",e.data.token),localStorage.setItem("id",e.data.userId),y()}).catch(function(e){console.error(e)})}),i.addEventListener("submit",function(e){e.preventDefault();var t,o=((t={}).email=i.email.value,t.location=i.location.value,t.surname=i.surname.value,t.name=i.name.value,t.password=i.password.value,t.age=i.age.value,t);S(i.querySelectorAll(".input-caption_bad"),i),0===g(e=i)+L(e)+(t=0,""!==(e=(e=e).querySelector(".age")).value&&e.value<20&&(e.classList.add("custom-input_bad"),e.insertAdjacentHTML("afterend",'<p class="input-caption input-caption_bad">Your age is under 20</p>'),t++),t)&&b(q,"POST",o).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;i.classList.add("closed"),d.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),l.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(d.style.height="100vh");var t=l.querySelector(".modal-caption");l.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),i.classList.remove("closed"))})})}),f.addEventListener("submit",function(e){e.preventDefault();var t={to:(e=((t={}).name=f.nameMessage.value,t.subject=f.subjectMessage.value,t.email=f.emailMessage.value,t.phone=f.phoneMessage.value,t.text=f.textMessage.value,t)).email,body:JSON.stringify(e)};S(f.querySelectorAll(".input-caption_bad"),f),0===g(e=f)+L(e)&&b("https://academy.directlinedev.com/api/emails","POST",t).then(function(e){return e.json()}).then(function(e){if(!e.success)throw e;f.classList.add("closed"),v.insertAdjacentHTML("afterbegin",'<p class="modal-caption modal-caption_good">Form has been sent successfully</p>'),m.querySelector(".modal-close").classList.add("modal-close_caption"),window.matchMedia("(max-width: 680px)").matches&&(v.style.height="100vh");var t=m.querySelector(".modal-caption");m.querySelector(".modal-close").addEventListener("click",function(){t&&(t.remove(),f.classList.remove("closed"))})})});var e=document.querySelector(".slider__wrapper"),w=document.querySelector(".slider__pic"),p=document.querySelectorAll(".slider-button"),E=+getComputedStyle(e).width.split("px")[0],j=w.childElementCount,_=document.querySelectorAll(".slider-radio-buttons input");function A(){w.style.transform="translateX(".concat(k*-E,"px)")}var k=0;A(k=+localStorage.getItem("activeSlide")),_[k].checked=!0,p[1].addEventListener("click",function(e){k<j-1&&(k+=1,A(),_[k].checked=!0,localStorage.setItem("activeSlide",k))}),p[0].addEventListener("click",function(e){0<k&&(--k,A(),_[k].checked=!0,localStorage.setItem("activeSlide",k))});new Swiper(".swiper",{slidesPerView:"auto",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});window.addEventListener("scroll",function(){var e=document.querySelector(".btn-scroll-up");1200<=window.pageYOffset?(e.classList.add("scroll-show"),e.classList.contains("scroll-show")&&e.addEventListener("click",function(){window.scrollBy({top:-window.pageYOffset,behavior:"smooth"})})):e.classList.remove("scroll-show")});